!function(e){var t=["shoppingList.services","shoppingList.dialogService","ui.router","shoppingListApp.validators","ngAnimate"];e.module("shoppingListApp",t)}(window.angular),function(e){function t(e,t,i){function o(e){r.selectedItem={itemName:"",count:""},e&&(r.currentlyEditedItem=null)}function s(){r.currentlyEditedItem.itemName=r.selectedItem.itemName,r.currentlyEditedItem.count=r.selectedItem.count,r.currentlyEditedItem.$update(function(){r.modalDialog.setType("message",r.currentlyEditedItem.itemName+" updated successfully!"),r.modalDialog.showDialog(),o(!0)},function(e){e&&(r.modalDialog.setType("warningMessage","Error updating item: "+e.message),r.modalDialog.showDialog())})}function a(){r.currentlyEditedItem.$delete(function(e){r.modalDialog.setType("message","Item successfully deleted."),r.modalDialog.showDialog();var t=r.existingItems.indexOf(e);r.existingItems.splice(t,1),o(!0)},function(e){e&&(r.modalDialog.setType("warningMessage","Error: "+e.message),r.modalDialog.showDialog()),r.modalDialog.setType("warningMessage","Error"),r.modalDialog.showDialog()})}function n(){var e=new t;e.itemName=r.selectedItem.itemName,e.count=r.selectedItem.count,e.$save(function(e){r.modalDialog.setType("message","Item successfully saved!"),r.modalDialog.showDialog(),r.existingItems.push(e),o()},function(e){e?(r.modalDialog.setType("warningMessage","Error: "+e.message),r.modalDialog().showDialog()):(r.modalDialog.setType("warningMessage","Error"),r.modalDialog.showDialog())})}var r=this;r.modalDialog=e,o(),r.existingItems=t.query(),r.EditMode=function(){return null!=r.currentlyEditedItem},r.ClearSelectionNotAvaliable=function(){return!(r.selectedItem.itemName&&""!=r.selectedItem.itemName||r.selectedItem.count&&""!=r.selectedItem.count)},r.EditItem=function(e){r.currentlyEditedItem=e,r.selectedItem={itemName:e.itemName,count:e.count}},r.SaveEdit=function(){r.modalDialog.setType("update","Do you wish to update "+r.currentlyEditedItem.itemName+" ?"),r.modalDialog.showDialog().then(s)},r.RemoveItem=function(e){r.currentlyEditedItem=e,r.modalDialog.setType("delete","You are about to delete this item. Do you wish to proceed?"),r.modalDialog.showDialog().then(a)},r.SaveNew=function(){e.setType("create","Do want proceeed saving this item?"),e.showDialog().then(n)},r.ClearSelection=function(){o(!0)},r.BackToList=function(){i.go("home")}}var i=e.module("shoppingListApp");i.component("modifyItems",{templateUrl:"static/app/add/add-item.html",controller:["DialogService","ItemsService","$state",t]})}(window.angular),function(e){function t(e,t,i){function o(){a.ItemsToBuy.forEach(function(e){e.checked&&e.$delete(function(){var t=a.ItemsToBuy.indexOf(e);a.ItemsToBuy.splice(t,1)})})}function s(){a.modalDialog.setType("message","Selected item/s were successufuly bought."),a.modalDialog.showDialog()}var a=this;a.modalDialog=e,a.ItemsToBuy=t.query(),a.EditItems=function(){i.go("add")},a.ItemsBought=function(){a.modalDialog.setType("buy","Selected item/s will be removed from the list."),a.modalDialog.showDialog().then(o).then(s)}}var i=e.module("shoppingListApp");i.component("itemList",{templateUrl:"static/app/list/item-list.html",controller:["DialogService","ItemsService","$state",t]})}(window.angular),function(e){function t(){var e=this;e.hide=function(){e.hideDialog()},e.proceed=function(){e.success()}}e.module("shoppingListApp").component("modalView",{templateUrl:"static/app/modal-window/modal-window.html",controller:t,bindings:{title:"<",modalType:"<",btnText:"<",body:"<",hideDialog:"&",success:"&",cancelNeeded:"<"}})}(window.angular);var app=angular.module("shoppingListApp");app.component("userAuth",{templateUrl:"static/app/user/user-layout.html"}),function(e){function t(){}e.module("shoppingListApp").component("ngErrorMessage",{templateUrl:"static/app/components/error-component/alert-error-component.html",controller:t,bindings:{errorText:"@"}})}(window.angular),function(e){function t(e){var t=e("http://localhost:8001/api/items/:id",{id:"@_id"},{update:{method:"PUT"}});return t}function i(e){return{defferedObject:null,visible:!1,showDialog:function(){if(this.visible=!0,this.defferedObject)return this.defferedObject.promise},setType:function(t,i){"message"!==t&&(this.defferedObject=e.defer()),"delete"===t?(this.dialogType="danger",this.title="Danger",this.cancelNeeded=!0,this.body=i,this.btnText="Delete"):"message"===t?(this.dialogType="success",this.title="Success",this.cancelNeeded=!1,this.body=i,this.btnText="Proceed"):"warningMessage"==t?(this.dialogType="warning",this.title="Error",this.cancelNeeded=!1,this.body=i,this.btnText="Proceed"):"create"===t?(this.dialogType="alert",this.title="Alert",this.cancelNeeded=!0,this.body=i,this.btnText="Create"):"buy"===t?(this.dialogType="alert",this.title="Alert",this.cancelNeeded=!0,this.body=i,this.btnText="Proceed"):"update"===t&&(this.dialogType="alert",this.title="Alert",this.cancelNeeded=!0,this.body=i,this.btnText="Update")},hideDialog:function(){this.visible=!1,this.defferedObject&&(this.defferedObject.reject("return"),this.defferedObject=null)},acceptAndClose:function(){this.visible=!1,this.defferedObject&&(this.defferedObject.resolve("return"),this.defferedObject=null)}}}t.$inject=["$resource"],i.$inject=["$q"],e.module("shoppingList.services",["ngResource"]).factory("ItemsService",t),e.module("shoppingList.dialogService",[]).factory("DialogService",i)}(window.angular),function(e){var t=e.module("shoppingListApp");t.config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("items",{template:"<modal-view></modal-view>",abstract:!0}).state("errorAlert",{template:"<ng-error-message></ng-error-message>",abstract:!0}).state("home",{url:"/",template:"<item-list></item-list>"}).state("add",{url:"/add",template:"<modify-items></modify-items>"}).state("auth",{url:"/auth",template:"<user-auth></user-auth>"}).state("auth.register",{url:"/register",template:"<user-register></user-register>"}).state("auth.login",{url:"/login",template:"<user-login></user-login>"})}])}(window.angular),function(e){e.module("shoppingListApp.validators",["shoppingListApp.validators.strings","shoppingListApp.validators.numbers","shoppingListApp.validators.passwordMatch"])}(window.angular),function(e){function t(){function e(e,t,i,o){o.$validators.validateNumber=function(e){return!isNaN(e)}}return{restrict:"A",require:"ngModel",link:e}}e.module("shoppingListApp.validators.numbers",[]).directive("validateNumber",t)}(window.angular),function(e){function t(){function e(e,t,i,o){o.$validators.passwordMatch=function(t){return e.firstPwdValue===t},e.$watch("firstPwdValue",function(){o.$validate()})}return{restrict:"A",require:"ngModel",scope:{firstPwdValue:"<abPwdMatch"},link:e}}e.module("shoppingListApp.validators.passwordMatch",[]).directive("abPwdMatch",t)}(window.angular),function(e){function t(){function e(e){var t=/^[^\/\\%&]*$/,i=e.match(t);return!!i}function t(t,i,o,s){s.$validators.validateString=function(t){var i=e(t);return!!i}}return{restrict:"A",require:"ngModel",link:t}}var i=e.module("shoppingListApp.validators.strings",[]);i.directive("validateString",t)}(window.angular),function(e){var t=e.module("shoppingListApp");t.component("userLogin",{templateUrl:"static/app/user/login/login-user.html"})}(window.angular),function(e){function t(){var e=this;e.user={email:"",password:""}}var i=e.module("shoppingListApp");i.component("userRegister",{templateUrl:"static/app/user/register/register-user.html",controller:t})}(window.angular);