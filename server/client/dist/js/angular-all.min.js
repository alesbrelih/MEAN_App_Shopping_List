function AddController(e,t,i){function o(e){l.selectedItem={itemName:"",count:""},e&&(l.currentlyEditedItem=null)}var l=this;l.modalDialog=e,o(),l.existingItems=t.query(),l.EditMode=function(){return null!=l.currentlyEditedItem},l.ClearSelectionNotAvaliable=function(){return""==l.selectedItem.itemName&&""==l.selectedItem.count},l.EditItem=function(e){l.currentlyEditedItem=e,l.selectedItem={itemName:e.itemName,count:e.count}},l.SaveEdit=function(){l.modalDialog.setType("update","Do you wish to update "+l.currentlyEditedItem.itemName+" ?"),l.modalDialog.setCallback(function(){l.currentlyEditedItem.itemName=l.selectedItem.itemName,l.currentlyEditedItem.count=l.selectedItem.count,t.update(l.currentlyEditedItem,function(){l.modalDialog.setType("message",l.currentlyEditedItem.itemName+" updated successfully!"),l.modalDialog.setCallback(null),l.modalDialog.showDialog(),o(!0)},function(e){e&&(l.modalDialog.setType("warningMessage","Error updating item: "+e.message),l.modalDialog.setCallback(null),l.modalDialog.showDialog())})}),l.modalDialog.showDialog()},l.RemoveItem=function(e){e.$delete(function(){var t=l.existingItems.indexOf(e);l.existingItems.splice(t,1)})},l.SaveNew=function(){var e=new t;e.itemName=l.selectedItem.itemName,e.count=l.selectedItem.count,e.$save(function(e){l.existingItems.push(e),o()})},l.ClearSelection=function(){o(!0)},l.BackToList=function(){i.go("home")}}function ListController(e,t,i){function o(){l.ItemsToBuy.forEach(function(e){e.checked&&e.$delete(function(){var t=l.ItemsToBuy.indexOf(e);l.ItemsToBuy.splice(t,1)})})}var l=this;l.modalDialog=e,l.ItemsToBuy=t.query(),l.EditItems=function(){i.go("add")},l.ItemsBought=function(){l.modalDialog.setType("message","hi"),l.modalDialog.setCallback(o),l.modalDialog.showDialog()}}function ModalController(){var e=this;e.Letalo="wwwwww",e.hide=function(){e.hideDialog()},e.proceed=function(){e.success()}}function ItemService(e){var t=e("http://localhost:8001/api/items/:id",{id:"@_id"},{update:{method:"PUT"}});return t}function DialogService(){return{visible:!1,title:"Success",showDialog:function(){this.visible=!0},setType:function(e,t){"delete"===e?(this.dialogType="danger",this.title="Danger",this.cancelNeeded=!0,this.body=t,this.btnText="Delete"):"message"===e?(this.dialogType="success",this.title="Success",this.cancelNeeded=!1,this.body=t,this.btnText="Proceed"):"warningMessage"==e?(this.dialogType="warning",this.title="Error",this.cancelNeeded=!1,this.body=t,this.btnText="Proceed"):"create"===e?(this.dialogType="alert",this.title="Alert",this.cancelNeeded=!0,this.body=t,this.btnText="Create"):"update"===e&&(this.dialogType="alert",this.title="Alert",this.cancelNeeded=!0,this.body=t,this.btnText="Update")},setCallback:function(e){this.callback=e},hideDialog:function(){this.visible=!1},dialogType:"success",cancelNeeded:!0,btnText:"Continue",body:"",acceptAndClose:function(){this.callback&&this.callback(),this.hideDialog()}}}angular.module("shoppingListApp",["shoppingList.services","shoppingList.dialogService","ui.router"]);var app=angular.module("shoppingListApp");app.component("modifyItems",{templateUrl:"static/app/add/add-item.html",controller:["DialogService","ItemsService","$state",AddController]});var app=angular.module("shoppingListApp");app.component("itemList",{templateUrl:"static/app/list/item-list.html",controller:["DialogService","ItemsService","$state",ListController]}),angular.module("shoppingListApp").component("modalView",{templateUrl:"static/app/modal-window/modal-window.html",controller:ModalController,bindings:{title:"<",modalType:"<",btnText:"<",body:"<",hideDialog:"&",success:"&"}}),ItemService.$inject=["$resource"],angular.module("shoppingList.services",["ngResource"]).factory("ItemsService",ItemService),angular.module("shoppingList.dialogService",[]).factory("DialogService",DialogService);var app=angular.module("shoppingListApp");app.config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("items",{template:"<modal-view></modal-view>",abstract:!0}).state("home",{url:"/",template:"<item-list></item-list>"}).state("add",{url:"/add",template:"<modify-items></modify-items>"})}]);