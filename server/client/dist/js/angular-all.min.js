function AddController(e,t,i){function o(e){n.selectedItem={itemName:"",count:""},e&&(n.currentlyEditedItem=null)}function l(){n.currentlyEditedItem.itemName=n.selectedItem.itemName,n.currentlyEditedItem.count=n.selectedItem.count,n.currentlyEditedItem.$update(function(){n.modalDialog.setType("message",n.currentlyEditedItem.itemName+" updated successfully!"),n.modalDialog.showDialog(),o(!0)},function(e){e&&(n.modalDialog.setType("warningMessage","Error updating item: "+e.message),n.modalDialog.showDialog())})}function a(){n.currentlyEditedItem.$delete(function(e){n.modalDialog.setType("message","Item successfully deleted."),n.modalDialog.showDialog();var t=n.existingItems.indexOf(e);n.existingItems.splice(t,1),o(!0)},function(e){e&&(n.modalDialog.setType("warningMessage","Error: "+e.message),n.modalDialog.showDialog()),n.modalDialog.setType("warningMessage","Error"),n.modalDialog.showDialog()})}function s(){var e=new t;e.itemName=n.selectedItem.itemName,e.count=n.selectedItem.count,e.$save(function(e){n.modalDialog.setType("message","Item successfully saved!"),n.modalDialog.showDialog(),n.existingItems.push(e),o()},function(e){e?(n.modalDialog.setType("warningMessage","Error: "+e.message),n.modalDialog().showDialog()):(n.modalDialog.setType("warningMessage","Error"),n.modalDialog.showDialog())})}var n=this;n.modalDialog=e,o(),n.existingItems=t.query(),n.EditMode=function(){return null!=n.currentlyEditedItem},n.ClearSelectionNotAvaliable=function(){return!(n.selectedItem.itemName&&""!=n.selectedItem.itemName||n.selectedItem.count&&""!=n.selectedItem.count)},n.EditItem=function(e){n.currentlyEditedItem=e,n.selectedItem={itemName:e.itemName,count:e.count}},n.SaveEdit=function(){n.modalDialog.setType("update","Do you wish to update "+n.currentlyEditedItem.itemName+" ?"),n.modalDialog.showDialog().then(l)},n.RemoveItem=function(e){n.currentlyEditedItem=e,n.modalDialog.setType("delete","You are about to delete this item. Do you wish to proceed?"),n.modalDialog.showDialog().then(a)},n.SaveNew=function(){e.setType("create","Do want proceeed saving this item?"),e.showDialog().then(s)},n.ClearSelection=function(){o(!0)},n.BackToList=function(){console.log(n.selectedItem),console.log(n.ClearSelectionNotAvaliable())}}function ListController(e,t,i){function o(){a.ItemsToBuy.forEach(function(e){e.checked&&e.$delete(function(){var t=a.ItemsToBuy.indexOf(e);a.ItemsToBuy.splice(t,1)})})}function l(){a.modalDialog.setType("message","Selected item/s were successufuly bought."),a.modalDialog.showDialog()}var a=this;a.modalDialog=e,a.ItemsToBuy=t.query(),a.EditItems=function(){i.go("add")},a.ItemsBought=function(){a.modalDialog.setType("buy","Selected item/s will be removed from the list."),a.modalDialog.showDialog().then(o).then(l)}}function ModalController(){var e=this;e.hide=function(){e.hideDialog()},e.proceed=function(){e.success()}}function ItemService(e){var t=e("http://localhost:8001/api/items/:id",{id:"@_id"},{update:{method:"PUT"}});return t}function DialogService(e){return{defferedObject:null,visible:!1,showDialog:function(){if(this.visible=!0,this.defferedObject)return this.defferedObject.promise},setType:function(t,i){"message"!==t&&(this.defferedObject=e.defer()),"delete"===t?(this.dialogType="danger",this.title="Danger",this.cancelNeeded=!0,this.body=i,this.btnText="Delete"):"message"===t?(this.dialogType="success",this.title="Success",this.cancelNeeded=!1,this.body=i,this.btnText="Proceed"):"warningMessage"==t?(this.dialogType="warning",this.title="Error",this.cancelNeeded=!1,this.body=i,this.btnText="Proceed"):"create"===t?(this.dialogType="alert",this.title="Alert",this.cancelNeeded=!0,this.body=i,this.btnText="Create"):"buy"===t?(this.dialogType="alert",this.title="Alert",this.cancelNeeded=!0,this.body=i,this.btnText="Proceed"):"update"===t&&(this.dialogType="alert",this.title="Alert",this.cancelNeeded=!0,this.body=i,this.btnText="Update")},hideDialog:function(){this.visible=!1,this.defferedObject&&(this.defferedObject.reject("return"),this.defferedObject=null)},acceptAndClose:function(){this.visible=!1,this.defferedObject&&(this.defferedObject.resolve("return"),this.defferedObject=null)}}}function ValidateStringController(){function e(e,t,i){var o=t[0],l=o.querySelectorAll("input[type=text]"),a=Array.prototype.slice.call(l),s=a.map(function(e){return angular.element(e)});s.forEach(function(e){})}return{restrict:"A",link:e}}angular.module("shoppingListApp",["shoppingList.services","shoppingList.dialogService","ui.router","shoppingListApp.validators"]);var app=angular.module("shoppingListApp");app.component("modifyItems",{templateUrl:"static/app/add/add-item.html",controller:["DialogService","ItemsService","$state",AddController]});var app=angular.module("shoppingListApp");app.component("itemList",{templateUrl:"static/app/list/item-list.html",controller:["DialogService","ItemsService","$state",ListController]}),angular.module("shoppingListApp").component("modalView",{templateUrl:"static/app/modal-window/modal-window.html",controller:ModalController,bindings:{title:"<",modalType:"<",btnText:"<",body:"<",hideDialog:"&",success:"&",cancelNeeded:"<"}}),ItemService.$inject=["$resource"],DialogService.$inject=["$q"],angular.module("shoppingList.services",["ngResource"]).factory("ItemsService",ItemService),angular.module("shoppingList.dialogService",[]).factory("DialogService",DialogService);var app=angular.module("shoppingListApp");app.config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("items",{template:"<modal-view></modal-view>",abstract:!0}).state("home",{url:"/",template:"<item-list></item-list>"}).state("add",{url:"/add",template:"<modify-items></modify-items>"})}]);var app=angular.module("shoppingListApp.validators",[]);app.directive("validateStrings",ValidateStringController);